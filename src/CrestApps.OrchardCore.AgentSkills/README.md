# CrestApps.OrchardCore.AgentSkills

A development-only NuGet package that distributes shared **AI agent instruction and guardrail files** for Orchard Core development.

When installed, agent skill files are automatically copied into the **solution-root** `.agents/skills` folder. There is **no runtime dependency** — this package is used purely for development and AI tooling guidance.

## Role in CrestApps.AgentSkills

`CrestApps.OrchardCore.AgentSkills` is the Orchard Core design-time project in the CrestApps.AgentSkills repository. It solves the problem of keeping `.agents/skills` in sync by copying the packaged Orchard Core skills into your solution on build.

## Install

```bash
dotnet add package CrestApps.OrchardCore.AgentSkills
dotnet build
```

> **Important:** Run `dotnet build` after installing or updating the package.
> The `.agents/skills` folder is created on the **first build** after install/update.
> In **Visual Studio**, a design-time build fires automatically after package install, so the folder appears immediately.
> `dotnet restore` alone does **not** trigger the copy — this is a fundamental NuGet/MSBuild limitation where custom targets from packages cannot execute during restore.

## How It Works

1. Skills are packed inside the NuGet package under `skills/`.
2. A `buildTransitive/` MSBuild `.targets` file runs `BeforeTargets="PrepareForBuild;CompileDesignTime"`.
3. On the first build after install, skills are copied to the **solution root** `.agents/skills` folder.
4. `$(SolutionDir)` is used when available (Visual Studio); otherwise falls back to `$(MSBuildProjectDirectory)/..`.
5. `SkipUnchangedFiles="true"` — subsequent builds skip files that haven't changed.
6. No compilation dependency — the copy runs before any C# code is compiled.

After the first build, the solution root will contain:

```
.agents/
  skills/
    orchardcore/
      orchardcore.content-types/
      orchardcore.modules/
      orchardcore.recipes/
      orchardcore.deployments/
      orchardcore.ai/
      ...
```

## Updating

```bash
dotnet add package CrestApps.OrchardCore.AgentSkills --version x.x.x
dotnet build
```

Files in `.agents/skills` are replaced with the latest version from the package on the next build.

## ⚠️ Warning

> **Warning:**
> This package will **always overwrite** files in the `.agents/` folder in your solution root.
> Any changes you make to files inside `.agents/` that were generated by this package **will be lost** when you build after installing or updating this NuGet package.
> Do **not** modify files added by this package inside `.agents/`. Treat them as read-only.

## License

This project is licensed under the [MIT License](../../LICENSE).
